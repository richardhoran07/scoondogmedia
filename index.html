<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SCOONDOG156 MULTIMEDIA WAREHOUSE</title>
  <link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&display=swap" rel="stylesheet">
  <style>
    :root { --ink: #d61a1a; }

    html, body { height:100%; }
    body { margin:0; background:black; color:#ffd7d7; font-family:'Inter',sans-serif; overflow-x:hidden; }

    /* Starfield canvas behind everything */
    #bg-canvas {
      position: fixed; inset: 0; width: 100%; height: 100%;
      z-index: 0; display: block;
    }

    /* Main layout */
    .wrap { max-width:1200px; margin:0 auto; padding:1rem 1rem 3rem; position:relative; z-index:2; }
    #sphere-container { width:320px; height:320px; margin:2rem auto; position:relative; }

    /* Slim audio player */
    #audio-controls {
      display:flex; justify-content:center; align-items:center; gap:.5rem;
      margin: .5rem auto 1rem; font-family:'UnifrakturCook',cursive; color:var(--ink);
    }
    #audio-controls select, #audio-controls button {
      background:black; color:var(--ink); border:2px solid var(--ink);
      padding:.25rem .5rem; font-family:inherit;
    }

    /* Panels */
    .panels { display:grid; gap:1.5rem; grid-template-columns:repeat(3,1fr); margin:1rem auto 2rem; max-width:1000px; }
    .panel {
      min-height:220px; background:rgba(10,10,15,0.85);
      display:grid; place-items:center; border:4px double var(--ink);
      box-shadow:0 0 20px rgba(214,26,26,.6); position:relative;
    }
    .panel-label { font-family:'UnifrakturCook',cursive; font-size:2rem; color:var(--ink); text-shadow:0 0 8px rgba(214,26,26,.55); }
    .panel a { position:absolute; inset:0; }

    .ticker-wrap {
      max-width:800px; margin:2rem auto 0; padding:.55rem 1rem;
      border:3px double var(--ink); background:rgba(15,15,20,0.9);
      color:var(--ink); text-align:center; font-family:'UnifrakturCook',cursive;
    }
    footer { text-align:center; color:var(--ink); font-size:.85rem; margin-top:1rem; }

    @media (max-width: 900px) {
      .panels { grid-template-columns: 1fr; max-width: 620px; }
    }
  </style>
</head>
<body>
  <!-- starfield background -->
  <canvas id="bg-canvas"></canvas>

  <main class="wrap">
    <div id="sphere-container"></div>

    <!-- slim audio player -->
    <div id="audio-controls">
      <select id="track-select">
        <option value="sounds/background.mp3">background.mp3</option>
        <option value="sounds/background2.mp3">background2.mp3</option>
        <option value="sounds/background3.mp3">background3.mp3</option>
      </select>
      <button id="play-btn">▶ Play</button>
    </div>

    <section class="panels">
      <div class="panel"><span class="panel-label">Words</span><a href="words/"></a></div>
      <div class="panel"><span class="panel-label">Images</span><a href="images/"></a></div>
      <div class="panel"><span class="panel-label">Sounds</span><a href="sounds/"></a></div>
    </section>

    <div class="ticker-wrap">Stop and smell the roses</div>
    <footer>© <span id="year"></span> SCOONDOG156</footer>
  </main>

  <!-- audio element (controlled by the slim player) -->
  <audio id="bg-audio" loop></audio>

  <!-- Three.js + examples (for RoomEnvironment) -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/"
    }
  }
  </script>

  <script type="module">
  import * as THREE from "three";
  import { RoomEnvironment } from "three/addons/environments/RoomEnvironment.js";

  /* ---------- STARFIELD (2D canvas) ---------- */
  const bgCanvas = document.getElementById("bg-canvas");
  const ctx = bgCanvas.getContext("2d");
  function resizeBG(){ bgCanvas.width = innerWidth; bgCanvas.height = innerHeight; }
  addEventListener("resize", resizeBG); resizeBG();

  const stars = Array.from({length: 500}).map(() => ({
    x: Math.random() * bgCanvas.width,
    y: Math.random() * bgCanvas.height,
    r: Math.random() * 1.3 + 0.4,
    color: ["#bbb","#aab","#ccddee","#ddd","#aaa"][Math.floor(Math.random()*5)],
    tw: Math.random() * 1000
  }));

  function drawStars(time){
    ctx.fillStyle = "black";
    ctx.fillRect(0,0,bgCanvas.width,bgCanvas.height);
    for(const s of stars){
      const flick = 0.55 + 0.45*Math.sin(time*0.0018 + s.tw);
      ctx.globalAlpha = flick;
      ctx.fillStyle = s.color;
      ctx.beginPath(); ctx.arc(s.x, s.y, s.r, 0, Math.PI*2); ctx.fill();
    }
    ctx.globalAlpha = 1;
  }
  (function loop(t){ drawStars(t); requestAnimationFrame(loop); })(0);

  /* ---------- ORB (Three.js) ---------- */
  const cont = document.getElementById("sphere-container");
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);
  camera.position.z = 3;

  const renderer = new THREE.WebGLRenderer({ antialias:true, alpha:true });
  renderer.setPixelRatio(Math.min(devicePixelRatio, 2));
  renderer.setSize(cont.clientWidth, cont.clientHeight);
  cont.appendChild(renderer.domElement);

  // Environment map via PMREM + RoomEnvironment (gives nice chrome reflections)
  const pmrem = new THREE.PMREMGenerator(renderer);
  pmrem.compileEquirectangularShader();
  const envTex = pmrem.fromScene(new RoomEnvironment(), 0.04).texture;
  scene.environment = envTex; // used by PBR materials automatically

  // Chrome orb
  const material = new THREE.MeshPhysicalMaterial({
    color: 0xffffff,
    metalness: 1,
    roughness: 0.05,
    clearcoat: 1,
    clearcoatRoughness: 0.08,
    envMapIntensity: 3.0
  });
  const sphere = new THREE.Mesh(new THREE.SphereGeometry(1, 96, 96), material);
  scene.add(sphere);

  // 7 saturated orbiting lights (nice colored glints)
  const lights = [
    new THREE.PointLight(0xff4040, 2.0),
    new THREE.PointLight(0x40e0ff, 2.0),
    new THREE.PointLight(0xff40ff, 2.0),
    new THREE.PointLight(0xffff40, 2.0),
    new THREE.PointLight(0x40ff40, 2.0),
    new THREE.PointLight(0xffa040, 2.0),
    new THREE.PointLight(0x8888ff, 2.0)
  ];
  lights.forEach(l => scene.add(l));

  // Resize handler for the orb canvas
  function onResize(){
    const w = cont.clientWidth, h = cont.clientHeight;
    renderer.setSize(w, h, false);
    camera.aspect = w / h;
    camera.updateProjectionMatrix();
  }
  addEventListener("resize", onResize);

  // Animate (rotation + breathing wobble + orbiting lights)
  function animate(){
    requestAnimationFrame(animate);
    const t = performance.now() * 0.0016;

    // subtle breathing / morphing
    sphere.scale.x = 1 + 0.07 * Math.sin(t * 2.1);
    sphere.scale.y = 1 + 0.07 * Math.cos(t * 1.7);
    sphere.scale.z = 1 + 0.07 * Math.sin(t * 2.3);

    // slow spin
    sphere.rotation.y += 0.01;
    sphere.rotation.x += 0.004;

    // lights orbit
    lights.forEach((l, i) => {
      const r = 3 + i * 0.25, s = 0.8 + i * 0.3;
      l.position.set(
        Math.cos(t * s + i) * r,
        Math.sin(t * s + i * 0.7) * r,
        Math.sin(t * s * 0.5 + i) * r
      );
    });

    renderer.render(scene, camera);
  }
  animate();

  /* ---------- SLIM AUDIO PLAYER ---------- */
  const audio = document.getElementById("bg-audio");
  const trackSelect = document.getElementById("track-select");
  const playBtn = document.getElementById("play-btn");
  audio.volume = 0.7;

  let isPlaying = false;
  playBtn.addEventListener("click", () => {
    if (!isPlaying) {
      audio.src = trackSelect.value;
      audio.play().then(() => {
        playBtn.textContent = "⏸ Pause";
        isPlaying = true;
      }).catch(()=>{ /* user interaction required */ });
    } else {
      audio.pause();
      playBtn.textContent = "▶ Play";
      isPlaying = false;
    }
  });
  trackSelect.addEventListener("change", () => {
    if (isPlaying) {
      audio.src = trackSelect.value;
      audio.play().catch(()=>{});
    }
  });

  document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
